ğŸ—„ï¸ DATABASE / JPA / HIBERNATE
Difference between lazy vs eager loading.
What is N+1 problem and how to fix it?
Difference between save(), persist(), merge().
What is first-level vs second-level cache?
Explain dirty checking.
-------------------------------------------------------------
ğŸ”¹ Q27. How does @Transactional interact with Hibernate?
-------------------------------------------------------------
ğŸ”‘ @Transactional uses Spring AOP and a TransactionManager to open and bind a Hibernate Session to the current thread,
    manage flush/commit or rollback, and ensure consistent persistence behavior across repository calls.
	1ï¸âƒ£ Who does what? (Roles)
		âœ” Spring: Transaction demarcation, lifecycle, rollback rules (via AOP)
		âœ” TransactionManager: Bridges Spring â†” ORM/DB, Usually JpaTransactionManager (for JPA/Hibernate)
		âœ” Hibernate: ORM that performs persistence using a Session
		âœ” Database: Executes SQL within the transaction

	2ï¸âƒ£ What happens internally when you call a @Transactional method
		âœ” Proxy intercepts the method call (Spring AOP)
		âœ” Spring asks PlatformTransactionManager to begin a transaction
		âœ” Hibernate Session is opened (or reused)
		âœ” Session is bound to the current thread
		âœ” Repositories use the same Session
		âœ” Method completes:
			âœ… Success â†’ flush + commit
			âŒ Runtime exception â†’ rollback
		âœ” Session is closed/unbound at the end
	3ï¸âƒ£ Session binding & why it matters
		âœ” Spring binds the Hibernate Session to the thread
		âœ” All DAO calls in the transaction share: Same Session, Same first-level cache
		âœ” Enables: Consistent reads, Dirty checking, Lazy loading (within TX)

	4ï¸âƒ£ Flush vs Commit (common interview trap)
		âœ” Flush: Hibernate syncs in-memory changes to SQL
		âœ” Commit: DB makes changes permanent
		âœ” @Transactional method ends 
			â†’ Hibernate flushes
			â†’ DB commit happens
		âœ” Flush can occur before commit (e.g., before a query)

	5ï¸âƒ£ Rollback rules (very important)
		âœ” Default behavior
			âœ” Rollback on unchecked exceptions (RuntimeException)
			âŒ No rollback on checked exceptions

		âœ” @Transactional(rollbackFor = Exception.class) Use this to include checked exceptions.

	6ï¸âƒ£ Lazy loading & @Transactional
		âœ” Without transaction : 
				Order order = repo.findById(id).get();
				order.getItems().size(); // LazyInitializationException

		âœ” With transaction
				@Transactional
				public Order getOrder(Long id) {
					Order o = repo.findById(id).get();
					o.getItems().size(); // works
					return o;
				}

		âœ” Why: The Hibernate Session is still open.

	7ï¸âƒ£ Propagation with Hibernate
		âœ” REQUIRED (default): Join existing Session/Tx
		âœ” REQUIRES_NEW: Suspend current Session/Tx, open a new one
		âœ” NESTED: Uses savepoints (DB-dependent)

	8ï¸âƒ£ Isolation levels (delegated to DB): @Transactional(isolation = Isolation.READ_COMMITTED)
		âœ” Spring sets isolation on the JDBC connection
		âœ” DB enforces it
		âœ” Hibernate obeys DB semantics

	9ï¸âƒ£ What doesnâ€™t work (classic pitfalls)
		âŒ Self-invocation (method in same class calls another @Transactional method)
		âŒ Private methods (proxies canâ€™t intercept)
		âŒ Using @Transactional on non-Spring beans
		
	| Stack                           | TransactionManager             |
	| ------------------------------- | ------------------------------ |
	| Spring Data JPA + Hibernate     | `JpaTransactionManager`        |
	| Pure Hibernate (SessionFactory) | `HibernateTransactionManager`  |
	| JDBC                            | `DataSourceTransactionManager` |

-------------------------------------------------------------	
ğŸ”¹ Q27. Explain optimistic vs pessimistic locking ?
-------------------------------------------------------------
	1ï¸âƒ£ Optimistic Locking
	ğŸ”¸ Core idea: Assume conflicts are rare. Donâ€™t lock data while reading; check for conflicts at update time.
		âœ” How it works: 
			Add a version field to the entity, Every update checks the version, If version changed â†’ fail the update
			
			@Entity
			public class Product {
				@Id
				private Long id;
				private int quantity;

				@Version
				private int version;
			}
			
		âœ” Pros : High performance, No database locks, Scales well, Ideal for read-heavy systems
		âœ” Cons : âŒ Update may fail, âŒ Requires retry logic
		âœ” Best use cases: High-read, low-write systems, Web apps, REST APIs, Microservices, User-driven updates
		
	2ï¸âƒ£ Pessimistic Locking
	ğŸ”¸ Core idea: Assume conflicts are likely. Lock data upfront so no one else can modify it.
		âœ” How it works:
			DB acquires a lock when data is read, Other transactions must wait.
			
			@Lock(LockModeType.PESSIMISTIC_WRITE)
			@Query("select p from Product p where p.id = :id")
			Product findForUpdate(@Param("id") Long id);
		
		âœ” Pros : Strong consistency, No update conflicts, Predictable behavior
		âœ” Cons : âŒ Lower concurrency, âŒ Risk of deadlocks, âŒ Slower under load
		âœ” Best use cases: High-contention updates, Financial transactions, Inventory reservations, Critical sections

-------------------------------------------------
How does pagination work internally?
-------------------------------------------------
Difference between Hibernate and Jdbc (hibernate vs JDBC)
Session VS Session factory (Differences)
Can you create multiple session factory objects? Justify your answer!
What is the equivalent object of the session in JPA?
What is persistence context in JPA / Hibernate?
Explain the first level of caching in Hibernate.
Justify the difference between get() and load() in Hibernate.
get method Vs load method [Coding Challenge]
Explain the transient state in JPA/ Hibernate.
What is a detached state in hibernate? 
How to detach an entity object from the persistence state without closing the session?
Coding challenge on Hibernate states.
Why do we need a connection pool? 
How will you implement connection pooling in your project?
What are the fetch types available in hibernate? Explain how will you use it in real-time.
Eagar Vs Lazy code practice 
What is a @Generated value annotation? Explain the different generation types available in JPA / hibernate.
Code Practice [Auto Vs Identity Vs Table generation type]
Explain the advantages of Named queries in hibernate/JPA? 
What is Criteria API in Hiberante? Explain the advantages.
@NamedQuery/@NamedQueries quick KT
Criteria API In Hibernate quick KT[Query/Restrictions /Pagination/Filter demo]
Update vs Merge | Difference between update and merge method in JPA / Hibernate?
Entity Object Vs Value Object - When to use what ?
What is an one to one mapping and how to set up it with JPA/Hibernate ?
Lazy vs Eager loading
N+1 problem
save vs persist vs merge
Dirty checking
Pagination

-------------------------------------------------------------
27. What is batch size in SQL ?
-------------------------------------------------------------
Batch size defines how many records are processed in one database call.
It reduces round trips to the database and improves performance during bulk operations.
